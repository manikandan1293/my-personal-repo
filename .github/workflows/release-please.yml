name: Release Automation
on:
  # 1Ô∏è‚É£ Automatic release PRs + releases on push to main
  push:
    branches:
      - main

  # 2Ô∏è‚É£ Manual trigger (you can enter version manually)
  workflow_dispatch:
    inputs:
      version:
        description: "Version to release (optional, e.g. 1.2.0)"
        required: false

permissions:
  contents: write
  pull-requests: write
jobs:
  release:
    runs-on: ubuntu-latest
    steps:
      - name: Manual release (specific version)
        if: ${{ github.event.inputs.version != '' }}
        run: |
          echo "Manual release for version ${{ github.event.inputs.version }}"
          release-please release \
            --release-type python \
            --release-as ${{ github.event.inputs.version }} \
            --token ${{ secrets.GITHUB_TOKEN }}
      - name: Run Release Automation
        uses: googleapis/release-please-action@c2a5a2bd6a758a0937f1ddb1e8950609867ed15c  #v4.3.0
        with:
          token: ${{ secrets.GITHUB_TOKEN }}
          # üëá Only set release-as if manually triggered with a version
          release-as: ${{ github.event.inputs.version }}
